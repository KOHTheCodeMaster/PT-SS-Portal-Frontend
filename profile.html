<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Basic Page Info -->
    <meta charset="utf-8">
    <title>Profile - PT Sermani Steel</title>

    <!-- Site favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="vendors/images/logo_besar.jpg">
    <link rel="icon" type="image/png" sizes="32x32" href="vendors/images/logo_besar.jpg">
    <link rel="icon" type="image/png" sizes="16x16" href="vendors/images/logo_besar.jpg">

    <!-- Mobile Specific Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
          rel="stylesheet">
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="vendors/styles/core.css">
    <link rel="stylesheet" type="text/css" href="vendors/styles/icon-font.min.css">
    <link rel="stylesheet" type="text/css" href="src/plugins/datatables/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" type="text/css" href="src/plugins/datatables/css/responsive.bootstrap4.min.css">
    <link rel="stylesheet" type="text/css" href="vendors/styles/style.css">

</head>

<body>
<!--<div class="pre-loader">
    <div class="pre-loader-box">
        <div class="loader-logo"><img src="vendors/images/logo.jpg" alt=""></div>
        <div class='loader-progress' id="progress_div">
            <div class='bar' id='bar1'></div>
        </div>
        <div class='percent' id='percent1'>0%</div>
        <div class="loading-text">
            Loading...
        </div>
    </div>
</div>-->

<div class="header">
    <div class="header-left">
        <div class="menu-icon dw dw-menu"></div>
    </div>
    <div class="header-right">
        <div class="user-info-dropdown">
            <div class="dropdown">
                <a class="dropdown-toggle" href="#" role="button" data-toggle="dropdown">
						<span class="user-icon">
							<img src="vendors/images/photo1.jpg" alt="">
						</span>
                    <span class="user-name">Johnny B Coleman</span>
                </a>
                <div class="dropdown-menu dropdown-menu-right dropdown-menu-icon-list">
                    <a class="dropdown-item" href="profile.html"><i class="dw dw-user1"></i> Profile</a>
                    <a class="dropdown-item" href="login.html"
                       onclick="localStorage.setItem('user', null);">
                        <i class="dw dw-logout"></i> Log Out
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="left-side-bar">
    <div class="brand-logo">
        <a href="dashboard.html">
            <img src="vendors/images/logo.jpg" alt="" class="dark-logo">
            <img src="vendors/images/logo.jpg" alt="" class="light-logo">
        </a>
        <div class="close-sidebar" data-toggle="left-sidebar-close">
            <i class="ion-close-round"></i>
        </div>
    </div>
    <div class="menu-block customscroll">
        <div class="sidebar-menu">
            <ul id="accordion-menu">
                <li class="dropdown">
                    <a href="javascript:" class="dropdown-toggle">
                        <span class="micon dw dw-house-1"></span><span class="mtext">Home</span>
                    </a>
                    <ul class="submenu">
                        <li><a href="dashboard.html">Dashboard</a></li>
                    </ul>
                </li>
                <li class="dropdown left-side-bar-production">
                    <a href="javascript:" class="dropdown-toggle">
                        <span class="micon dw dw-edit2"></span><span class="mtext">Production</span>
                    </a>
                    <ul class="submenu">
                        <li><a href="dashboard_produksi.html">Production Dashboard</a></li>
                        <li><a href="form-produksi.html">Production Form</a></li>
                        <li><a href="form-corrugation.html">Corrugation Form</a></li>
                        <li class="left-side-bar-production-control">
                            <a href="production-control.html">Production Control</a>
                        </li>
                    </ul>
                </li>
                <li class="dropdown left-side-bar-selling">
                    <a href="javascript:" class="dropdown-toggle">
                        <span class="micon dw dw-analytics-21"></span><span class="mtext">Selling</span>
                    </a>
                    <ul class="submenu">
                        <li><a href="dashboard_pemasaran.html">Selling Dashboard</a></li>
                        <li><a href="form-pemasaran.html">Selling Form</a></li>
                        <li class="left-side-bar-selling-control">
                            <a href="selling-control.html">Selling Control</a>
                        </li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="javascript:" class="dropdown-toggle">
                        <span class="micon dw dw-apartment"></span><span class="mtext">Warehouse</span>
                    </a>
                    <ul class="submenu">
                        <li><a href="dashboard_gudang.html">Warehouse Dashboard</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</div>
<div class="mobile-menu-overlay"></div>


<div class="main-container">
    <div class="pd-ltr-20 xs-pd-20-10">
        <div class="min-height-200px">
            <div class="page-header">
                <div class="row">
                    <div class="col-md-12 col-sm-12">
                        <div class="title">
                            <h4>Profile</h4>
                        </div>
                        <nav aria-label="breadcrumb" role="navigation">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="dashboard.html">Home</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Profile</li>
                            </ol>
                        </nav>
                    </div>
                </div>
            </div>
            <div class="card-box" style="margin-bottom: 30px;">
                <div class="profile-photo">
                    <img src="vendors/images/photo1.jpg" alt="" class="avatar-photo">
                    <div class="modal fade" id="modal" tabindex="-1" role="dialog" aria-labelledby="modalLabel"
                         aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-body pd-5">
                                    <div class="img-container">
                                        <img id="image" src="vendors/images/photo1.jpg" alt="Picture">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row ">
                    <div class="card-body">
                        <h5 id="profile-details-full-name" class="text-center h5 mb-0">Full Name</h5>
                        <p class="text-center text-muted font-14">Lorem ipsum dolor sit amet</p>

                        <h5 class="text-center h5 mb-0">Contact Information</h5>
                        <ul style="text-align: center;">
                            <li>
                                <span>Email Address:</span>
                                <span id="profile-details-email-id"></span>
                            </li>
                            <li>
                                <span>Phone Number:</span>
                                <span id="profile-details-phone-number"></span>
                            </li>
                            <li>
                                <span>Role:</span>
                                <span id="profile-details-user-role"></span>
                            </li>
                            <li>
                                <span>Address:</span>
                                <span id="profile-details-address"></span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-wrap pd-20 mb-20 card-box">
            Design for Internal Use Only
        </div>
    </div>
</div>
<!-- js -->
<script src="vendors/scripts/core.js"></script>
<script src="vendors/scripts/script.min.js"></script>
<script src="vendors/scripts/process.js"></script>
<script src="vendors/scripts/layout-settings.js"></script>
<script src="src/plugins/cropperjs/dist/cropper.js"></script>
<script src="js/myjs/login/auth-helper.js"></script>
<script>
    function initializeUserProfilePage() {
        let currentUser = JSON.parse(localStorage.getItem('user'));
        if (currentUser === null) {
            console.log('No User Logged In.');
            window.location.href = '/PT-SS-Portal-Frontend/login.html';
            return;
        } else console.log(JSON.stringify(currentUser));

        //  Update User Profile details
        $('#profile-details-full-name').text(currentUser.name);
        $('#profile-details-email-id').text(currentUser.emailId);
        $('#profile-details-phone-number').text(currentUser.phoneNumber);
        $('#profile-details-user-role').text(currentUser.userRole);
        $('#profile-details-address').text(currentUser.address);
        // $('#profile-details-country').text(currentUser.address);
    }

    window.addEventListener('DOMContentLoaded', function () {
        let image = document.getElementById('image');
        let cropBoxData;
        let canvasData;
        let cropper;

        console.log("Test - Time Stamp: " + new Date());

        initializeUserProfilePage();

        $('#modal').on('shown.bs.modal', function () {
            cropper = new Cropper(image, {
                autoCropArea: 0.5,
                dragMode: 'move',
                aspectRatio: 3 / 3,
                restore: false,
                guides: false,
                center: false,
                highlight: false,
                cropBoxMovable: false,
                cropBoxResizable: false,
                toggleDragModeOnDblclick: false,
                ready: function () {
                    cropper.setCropBoxData(cropBoxData).setCanvasData(canvasData);
                }
            });
        }).on('hidden.bs.modal', function () {
            cropBoxData = cropper.getCropBoxData();
            canvasData = cropper.getCanvasData();
            cropper.destroy();
        });
    });


</script>
</body>

</html>
